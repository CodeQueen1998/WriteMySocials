<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>360° Brand Diagnostic™ | Write My Socials</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet"/>

<style>
body{
  font-family:'Poppins',sans-serif;
  max-width:760px;
  margin:auto;
  padding:120px 20px;
}
h1{
  font-family:'Playfair Display',serif;
  font-size:2.6rem;
  margin-bottom:30px;
}
form{
  display:grid;
  gap:16px;
}
input,textarea,select{
  padding:12px;
  border-radius:10px;
  border:1px solid #ddd;
}
button{
  padding:14px;
  border-radius:999px;
  background:#111;
  color:#fff;
  border:none;
  cursor:pointer;
  letter-spacing:.08em;
}
button:disabled{opacity:.6}
.status{margin-top:12px;}
</style>
</head>
<body>

<h1>360° Brand Diagnostic™</h1>

<form id="brandForm">

<input name="first_name" placeholder="First Name"/>
<input name="last_name" placeholder="Last Name"/>
<input name="email" type="email" placeholder="Email" required/>
<input name="phone" placeholder="Phone"/>
<input name="business_name" placeholder="Business Name"/>
<textarea name="business_desc" placeholder="What does your business do?"></textarea>
<input name="website" placeholder="Website"/>
<input name="social_handle" placeholder="Instagram / TikTok"/>

<select name="budget">
<option value="">Budget</option>
<option>Under $1k</option>
<option>$1k–$3k</option>
<option>$3k–$6k</option>
<option>$6k–$10k</option>
<option>$10k+</option>
</select>

<label>
<input type="checkbox" id="marketingConsent"/>
 Subscribe to email marketing
</label>

<button type="submit" id="submitBtn">LET’S GET STARTED</button>
<div class="status" id="status"></div>

</form>

<script>
const KLAVIYO_PUBLIC_KEY = "RYm8PD"; // your public Site ID

const form = document.getElementById("brandForm");
const statusEl = document.getElementById("status");
const submitBtn = document.getElementById("submitBtn");

function setStatus(msg){
  statusEl.textContent = msg;
}

form.addEventListener("submit", async (e)=>{
  e.preventDefault();

  submitBtn.disabled = true;
  setStatus("Submitting…");

  try{
    const data = new FormData(form);
    const base = Object.fromEntries(data.entries());
    const wantsMarketing = document.getElementById("marketingConsent").checked;

    const payload = {
      token: KLAVIYO_PUBLIC_KEY,
      properties: {
        $email: base.email,
        $first_name: base.first_name || "",
        $last_name: base.last_name || "",
        phone: base.phone || "",
        business_name: base.business_name || "",
        business_desc: base.business_desc || "",
        website: base.website || "",
        social_handle: base.social_handle || "",
        monthly_budget: base.budget || "",
        submitted_at: new Date().toISOString()
      }
    };

    // Identify profile (no revision header required)
    await fetch("https://a.klaviyo.com/api/identify", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    // Optional subscribe
    if(wantsMarketing){
      await fetch("https://a.klaviyo.com/api/subscribe", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          token: KLAVIYO_PUBLIC_KEY,
          email: base.email
        })
      });
    }

    setStatus("Submitted ✅ Thank you — we’ll be in touch.");
    form.reset();

  }catch(err){
    console.error(err);
    setStatus("Something went wrong. Please try again.");
  }finally{
    submitBtn.disabled = false;
  }
});
</script>

</body>
</html>




